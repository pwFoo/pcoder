function PCO_ObtenerContenidoAjax(c,d,b){var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{a=new ActiveXObject("Microsoft.XMLHTTP")}a.onreadystatechange=function(){if(a.readyState===4&&a.status===200){contenido_recibido=a.responseText;contenido_recibido=contenido_recibido.trim();if(c==1){return contenido_recibido}}};if(c==1){a.open("POST",d,true)}else{a.open("POST",d,false)}a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(b);if(c==0){return contenido_recibido}}function PCO_MostrarMensajeCargandoSimple(a){$("#PCO_Modal_MensajeCargandoSimple").modal("show");$("#PCO_Modal_MensajeCargandoSimple").css("z-index","1500");if(a!=0){setTimeout(function(){PCOJS_OcultarMensajeCargandoSimple()},a)}}function PCO_OcultarMensajeCargandoSimple(){$("#PCO_Modal_MensajeCargandoSimple").modal("hide");$("#PCO_Modal_MensajeCargandoSimple").hide()}function CambiarFuenteEditor(b){editor.setFontSize(b);try{EditorClonado.setFontSize(b)}catch(a){}}function CambiarTemaEditor(b){editor.setTheme(b);try{EditorClonado.setTheme(b)}catch(a){}}function CambiarModoEditor(c){var b=c.replace(/_/g," ");b=b.toLowerCase();editor.getSession().setMode(b);try{EditorClonado.getSession().setMode(b)}catch(a){}}function CaracteresInvisiblesEditor(a){if(a==0){editor.setShowInvisibles(false)}else{editor.setShowInvisibles(true)}}function VerificarSintaxisEditor(a){if(a==0){editor.session.setOption("useWorker",false)}else{editor.session.setOption("useWorker",true)}}function VerificarAutocompletadoEditor(a){if(a==0){editor.session.setOption("enableBasicAutocompletion",false);editor.session.setOption("enableSnippets",false);editor.session.setOption("enableLiveAutocompletion",false)}else{editor.session.setOption("enableBasicAutocompletion",true);editor.session.setOption("enableSnippets",true);editor.session.setOption("enableLiveAutocompletion",true)}}function IntercambiarEstadoCaracteresInvisibles(){if(editor.getShowInvisibles()==true){editor.setShowInvisibles(false)}else{editor.setShowInvisibles(true)}}function ActualizarTituloEditor(a){document.title=a;$(document).attr("title",a)}function SaltarALinea(){var a=document.getElementById("linea_salto").value;if(a!=""&&a>0){editor.gotoLine(a,0,true);document.getElementById("linea_salto").value=""}}function QuitarAvisoAlmacenamiento(){setTimeout("PCO_OcultarMensajeCargandoSimple();",500)}function Guardar(){if(document.form_archivo_editado.PCODER_archivo.value!="demos/demo.txt"){PCO_MostrarMensajeCargandoSimple();document.form_archivo_editado.submit()}}function PCO_VentanaPopup(c,a,b){window.open(c,a,b)}function PCO_AgregarElementoDiv(c,a){var b=document.getElementById(c);var d=document.createElement("NuevoElemento");d.innerHTML=a;b.appendChild(d)}function PCODER_DesactivarPanelIzquierdo(){AnchoPanelIzquierdo=0;$("#panel_izquierdo").removeClass("col-md-2");$("#panel_izquierdo").hide();PCODER_RecalcularMaquetacion()}function PCODER_DesactivarPanelDerecho(){AnchoPanelDerecho=0;$("#panel_derecho").removeClass("col-md-2");$("#panel_derecho").hide();PCODER_RecalcularMaquetacion()}function PCODER_RecalcularPanelesLaterales(){AnchoPanelCentral=12-AnchoPanelIzquierdo-AnchoPanelDerecho;$("#panel_izquierdo").removeClass("col-md-2");$("#panel_derecho").removeClass("col-md-2");if(AnchoPanelIzquierdo==0){$("#panel_izquierdo").hide()}else{$("#panel_izquierdo").addClass("col-md-"+AnchoPanelIzquierdo)}if(AnchoPanelDerecho==0){$("#panel_derecho").hide()}else{$("#panel_derecho").addClass("col-md-"+AnchoPanelDerecho)}$("#panel_central").removeClass("col-md-8");$("#panel_central").removeClass("col-md-10");$("#panel_central").removeClass("col-md-12");$("#panel_central").addClass("col-md-"+AnchoPanelCentral);var b=$("#boton_ocultacion_panel_izquierdo").height();var a=$("#path_exploracion_archivos").height();var c=$("#panel_central_medio").height()-b-a;$("#marco_explorador").height(c+"px").css({})}function PCODER_ActivarPanelIzquierdo(){AnchoPanelIzquierdo=2;$("#panel_izquierdo").show();$("#panel_izquierdo").removeClass("col-md-0");$("#panel_izquierdo").addClass("col-md-"+AnchoPanelIzquierdo);PCODER_RecalcularMaquetacion()}function PCODER_ActivarPanelDerecho(){AnchoPanelDerecho=2;$("#panel_derecho").show();$("#panel_derecho").removeClass("col-md-0");$("#panel_derecho").addClass("col-md-"+AnchoPanelDerecho);PCODER_RecalcularMaquetacion()}function PCODER_RecalcularPanelesEditores(){var c=$("#contenedor_archivos").height();var d=$("#contenedor_mensajes_superior").height();var a=$("#panel_central_medio").height()-c-d;var e=$("#panel_central_medio").width();if(ListaArchivos[IndiceArchivoActual].VistaSplit=="H"){a=Math.round(a/2)-1;$("#panel_editor_clonado").show()}if(ListaArchivos[IndiceArchivoActual].VistaSplit=="V"){e=Math.round(e/2)-2;$("#panel_editor_clonado").show()}AltoEditorReal=a;AnchoEditorReal=e;AltoEditorClonado=a;AnchoEditorClonado=e;if(ListaArchivos[IndiceArchivoActual].VistaSplit==""){AltoEditorClonado=0;AnchoEditorClonado=0;$("#panel_editor_clonado").hide()}$("#editor_codigo").height(AltoEditorReal+"px").css({});$("#editor_codigo").width(AnchoEditorReal+"px").css({});$("#editor_clonado").height(AltoEditorClonado+"px").css({});$("#editor_clonado").width(AnchoEditorClonado+"px").css({});editor.resize();try{EditorClonado.resize()}catch(b){}}function PCODER_DividirPantalla_NO(){if(ListaArchivos[IndiceArchivoActual].VistaSplit!=""){ListaArchivos[IndiceArchivoActual].VistaSplit="";PCODER_RecalcularMaquetacion()}}function PCODER_DividirPantalla_Horizontal(){if(ListaArchivos[IndiceArchivoActual].VistaSplit!="H"){ListaArchivos[IndiceArchivoActual].VistaSplit="H";ClonarPropiedadesEditor();PCODER_RecalcularMaquetacion()}}function PCODER_DividirPantalla_Vertical(){if(ListaArchivos[IndiceArchivoActual].VistaSplit!="V"){ListaArchivos[IndiceArchivoActual].VistaSplit="V";ClonarPropiedadesEditor();PCODER_RecalcularMaquetacion()}}function PCODER_RecalcularPanelesExtensiones(){var a=$(window).height();var b=a-$("#panel_superior").height()-$("#panel_inferior").height()-$("#panel_central_superior").height();$("#frame_terminal").css("height",b+"px");$("#frame_terminal").css("width","100%");$("#frame_explorador").css("height",b+"px");$("#frame_explorador").css("width","100%")}function PCODER_RecalcularMaquetacion(){PCODER_RecalcularPanelesLaterales();var a=$(window).height();var k=$(window).width();var e=$(document).height();var d=$(document).width();var j=$("#panel_superior").height();var c=$("#panel_central_superior").height();var b=$("#panel_central_inferior").height();var h=$("#panel_inferior").height();var g=(j+c+b+h)*100/a;var f=100-g;$("#panel_central_medio").height(f+"vh").css({});PCODER_RecalcularPanelesEditores();PCODER_RecalcularPanelesExtensiones()}function IntercambiarPantallaCompleta(){if(!document.fullscreenElement&&!document.mozFullScreenElement&&!document.webkitFullscreenElement&&!document.msFullscreenElement){if(document.documentElement.requestFullscreen){document.documentElement.requestFullscreen()}else{if(document.documentElement.msRequestFullscreen){document.documentElement.msRequestFullscreen()}else{if(document.documentElement.mozRequestFullScreen){document.documentElement.mozRequestFullScreen()}else{if(document.documentElement.webkitRequestFullscreen){document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}}}}else{if(document.exitFullscreen){document.exitFullscreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}}}}}}function AumentarTamanoFuente(){tamano=editor.getFontSize();tamano=tamano.substring(0,tamano.length-2);tamano=parseInt(tamano)+2;CambiarFuenteEditor(tamano+"px")}function DisminuirTamanoFuente(){tamano=editor.getFontSize();tamano=tamano.substring(0,tamano.length-2);tamano=parseInt(tamano)-2;CambiarFuenteEditor(tamano+"px")}function ExplorarPath(){$(document).ready(function(){$("#marco_explorador").fileTree({root:path_exploracion_archivos.value,script:"../../inc/jquery/plugins/jquery.fileTree-1.01/connectors/jqueryFileTree.php"},function(a){PCODER_CargarArchivo(a);$("#pestana_editor_archivos").trigger("click")})})}function ActualizarBarraEstado(){posicion_cursor=editor.getCursorPosition();ListaArchivos[IndiceArchivoActual].LineaActual=posicion_cursor.row;ListaArchivos[IndiceArchivoActual].ColumnaActual=posicion_cursor.column;var a=editor.session.getLength();var b=editor.session.getValue().length;$("#NroLineasDocumento").html(MULTILANG_PCODER_Linea+": "+(ListaArchivos[IndiceArchivoActual].LineaActual+1)+" / "+a);$("#NroColumnaDocumento").html(MULTILANG_PCODER_Columna+": "+(ListaArchivos[IndiceArchivoActual].ColumnaActual+1));$("#NroCaracteresDocumento").html(MULTILANG_PCODER_Caracteres+": "+b);$("#TipoDocumento").html(MULTILANG_PCODER_Tipo+": "+ListaArchivos[IndiceArchivoActual].TipoDocumento);$("#TamanoDocumento").html(MULTILANG_PCODER_Tamano+": <b>"+ListaArchivos[IndiceArchivoActual].TamanoDocumento+" Kb</b>");$("#FechaModificadoDocumento").html(MULTILANG_PCODER_Modificado+": <b>"+ListaArchivos[IndiceArchivoActual].FechaModificadoDocumento+"</b>");window.setTimeout(ActualizarBarraEstado,1000)}function AgregarNuevoTextarea(a,c,b){elemento_textarea=document.createElement("textarea");elemento_textarea.cols=1;elemento_textarea.rows=1;elemento_textarea.name=c;elemento_textarea.id=c;elemento_textarea.value=b;a.appendChild(elemento_textarea)}function PCODER_CambiarArchivoActual(a,b){if(b==0){document.getElementById("PCODER_AreaTexto"+IndiceArchivoActual).value=editor.getSession().getValue()}document.form_archivo_editado.PCODER_archivo.value=ListaArchivos[a].RutaDocumento;document.form_archivo_editado.PCODER_TokenEdicion.value=ListaArchivos[a].TokenEdicion;document.form_archivo_editado.PCODER_AreaTexto.value=document.getElementById("PCODER_AreaTexto"+a).value;editor.setValue(document.getElementById("PCODER_AreaTexto"+a).value);editor.focus();editor.gotoLine(ListaArchivos[a].LineaActual+1,ListaArchivos[a].ColumnaActual,false);editor.scrollToLine(ListaArchivos[a].LineaActual+1,true,false,function(){});editor.clearSelection();ActualizarTituloEditor("{P} "+ListaArchivos[a].NombreArchivo);if(ListaArchivos[IndiceArchivoActual].ModoEditor!=ListaArchivos[a].ModoEditor){CambiarModoEditor("ace/mode/"+ListaArchivos[a].ModoEditor)}IndiceArchivoActual=a;ValorPermisosRW=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_VerificarPermisosRW&PCODER_archivo="+ListaArchivos[a].RutaDocumento);if(ValorPermisosRW==0&&ListaArchivos[a].RutaDocumento!="demos/demo.txt"){contenedor_mensajes_superior.innerHTML='<div class="alert alert-warning btn-xs" role="alert" style="margin: 0px; padding: 5px;" ><i class="fa fa-warning"></i> <b>'+MULTILANG_PCODER_ErrorRW+"</b>. "+MULTILANG_PCODER_Estado+"="+ListaArchivos[a].PermisosArchivo+"</div>"}else{contenedor_mensajes_superior.innerHTML=""}ActualizarPestanasArchivos()}function PCODER_CerrarArchivo(a){ListaArchivos[a].TipoDocumento="";ListaArchivos[a].TamanoDocumento="";ListaArchivos[a].FechaModificadoDocumento="";ListaArchivos[a].RutaDocumento="";ListaArchivos[a].TokenEdicion="";ListaArchivos[a].ModoEditor="";ListaArchivos[a].NombreArchivo="";ListaArchivos[a].LineaActual="";ListaArchivos[a].PermisosRW="";ListaArchivos[a].PermisosArchivo="";ListaArchivos[a].VistaSplit="";if(a==1){IndiceArchivoActual=0}else{if(a==IndiceArchivoActual){IndiceArchivoActual=1}}ActualizarPestanasArchivos();PCODER_CambiarArchivoActual(IndiceArchivoActual,1)}function PCODER_CerrarArchivoActual(){PCODER_CerrarArchivo(IndiceArchivoActual)}function PCODER_BuscarArchivoAbierto(a){Encontrado=-1;for(i=0;i<IndiceAperturaArchivo;i++){if(ListaArchivos[i].RutaDocumento==a){Encontrado=i}}return Encontrado}function ActualizarPestanasArchivos(){var a=0;lista_contenedor_archivos.innerHTML="";for(i=1;i<IndiceAperturaArchivo;i++){ComplementoClase="";if(IndiceArchivoActual==i){ComplementoClase='class="active"'}if(ListaArchivos[i].NombreArchivo!=""){ComplementoTooltip="<i class='fa fa-hdd-o'></i> "+ListaArchivos[i].RutaDocumento+"<br>";ComplementoTooltip+="<i class='fa fa-key'></i> Permisos (CHMOD): "+ListaArchivos[i].PermisosArchivo+"<br>";lista_contenedor_archivos.innerHTML=lista_contenedor_archivos.innerHTML+"<li "+ComplementoClase+' ><a data-toggle="tooltip" data-html="true" data-placement="bottom" title="'+ComplementoTooltip+'" style="cursor:pointer;" OnClick="PCODER_CambiarArchivoActual('+i+',0);"><i class="fa fa-file-text-o fa-inactive"></i> '+ListaArchivos[i].NombreArchivo+"</a></li>";lista_contenedor_archivos.innerHTML=lista_contenedor_archivos.innerHTML+'<li ><a data-toggle="tab" style="cursor:pointer; margin-right: 10px;" OnClick="PCODER_CerrarArchivo('+i+');"><i class="fa fa-times"></i></a></li>';a=1}RecargarToolTipsEnlaces()}if(a==1){$("#contenedor_archivos").height("auto").css({})}else{$("#contenedor_archivos").height("0px").css({})}PCODER_RecalcularMaquetacion()}function PCODER_CargarArchivo(a){if(typeof a=="undefined"){a="demos/demo.txt"}BusquedaArchivoAbierto=-1;if(IndiceAperturaArchivo>0){BusquedaArchivoAbierto=PCODER_BuscarArchivoAbierto(a)}if(IndiceAperturaArchivo!=0){document.getElementById("PCODER_AreaTexto"+IndiceArchivoActual).value=editor.getSession().getValue()}if(BusquedaArchivoAbierto==-1){ValorTipoElemento=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerTipoElemento&PCODER_archivo="+a);ValorTamanoDocumento=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerTamanoDocumento&PCODER_archivo="+a);ValorFechaModificadoDocumento=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerFechaElemento&PCODER_archivo="+a);ValorTokenEdicion=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerTokenEdicion&PCODER_archivo="+a);ValorModoEditor=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerModoEditor&PCODER_archivo="+a);ValorNombreArchivo=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerNombreArchivo&PCODER_archivo="+a);ValorContenidoArchivo=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerContenidoArchivo&PCODER_archivo="+a);ValorPermisosRW=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_VerificarPermisosRW&PCODER_archivo="+a);ValorPermisosArchivo=PCO_ObtenerContenidoAjax(0,"index.php","PCO_Accion=PCOMOD_ObtenerPermisosArchivo&PCODER_archivo="+a);ValorVistaSplit="";ListaArchivos[IndiceAperturaArchivo]={TipoDocumento:ValorTipoElemento,TamanoDocumento:ValorTamanoDocumento,FechaModificadoDocumento:ValorFechaModificadoDocumento,RutaDocumento:a,TokenEdicion:ValorTokenEdicion,ModoEditor:ValorModoEditor,NombreArchivo:ValorNombreArchivo,LineaActual:1,ColumnaActual:0,PermisosRW:ValorPermisosRW,PermisosArchivo:ValorPermisosArchivo,VistaSplit:ValorVistaSplit};AgregarNuevoTextarea(document.form_textareas_archivos,"PCODER_AreaTexto"+IndiceAperturaArchivo,ValorContenidoArchivo);IndiceUltimoArchivoAbierto=IndiceAperturaArchivo;IndiceArchivoActual=IndiceAperturaArchivo;IndiceAperturaArchivo++;PCODER_CambiarArchivoActual(IndiceArchivoActual,1);CambiarModoEditor("ace/mode/"+ListaArchivos[IndiceArchivoActual].ModoEditor)}else{PCODER_CambiarArchivoActual(BusquedaArchivoAbierto,0)}}var ListaArchivos=new Array();var IndiceAperturaArchivo=0;var IndiceUltimoArchivoAbierto=IndiceAperturaArchivo;var IndiceArchivoActual=IndiceAperturaArchivo;var ValorModoEditor;AnchoPanelIzquierdo=0;AnchoPanelDerecho=0;$("#iframe_marco_explorador").load(function(){$("#progreso_marco_explorador").hide()});ace.require("ace/ext/language_tools");editor=ace.edit("editor_codigo");editor.getSession().setUseWorker(true);editor.resize(true);PCODER_CargarArchivo();CambiarFuenteEditor("13px");CambiarTemaEditor("ace/theme/ambiance");editor.setOptions({enableBasicAutocompletion:true,enableSnippets:true,enableLiveAutocompletion:true});editor.setAnimatedScroll(true);editor.setShowPrintMargin(0);CaracteresInvisiblesEditor(0);editor.getSession().on("change",function(){document.getElementById("PCODER_AreaTexto").value=editor.getSession().getValue()});$(window).resize(function(){PCODER_RecalcularMaquetacion()});$(window).bind("keydown",function(a){if(a.ctrlKey||a.metaKey){switch(String.fromCharCode(a.which).toLowerCase()){case"s":a.preventDefault();Guardar();break}}});function ClonarSesionEditor(b){var a=new ace.EditSession(b.getDocument(),b.getMode());a.$foldData=b.$cloneFoldData();return a}function ClonarPropiedadesEditor(){EditorClonado.setAnimatedScroll(editor.getAnimatedScroll());EditorClonado.setBehavioursEnabled(editor.getBehavioursEnabled());EditorClonado.setOverwrite(editor.getOverwrite());EditorClonado.setPrintMarginColumn(editor.getPrintMarginColumn());EditorClonado.setScrollSpeed(editor.getScrollSpeed());EditorClonado.setShowInvisibles(editor.getShowInvisibles());EditorClonado.setShowPrintMargin(editor.getShowPrintMargin());EditorClonado.setWrapBehavioursEnabled(editor.getWrapBehavioursEnabled());EditorClonado.setTheme(editor.getTheme());EditorClonado.setFontSize(editor.getFontSize());ModoClonado="ace/mode/"+ListaArchivos[IndiceArchivoActual].ModoEditor;var a=ModoClonado.replace(/_/g," ");a=a.toLowerCase();EditorClonado.getSession().setMode(a);EditorClonado.getSession().setUseWorker(false)}var NuevaSessionEditor=editor.getSession();var editor_actual=document.getElementById("editor_codigo");var parent=editor_actual.parentNode;var clone=editor_actual.cloneNode();var EditorClonado=ace.edit("editor_clonado");EditorClonado.setSession(ClonarSesionEditor(NuevaSessionEditor));ExplorarPath();PCODER_RecalcularMaquetacion();window.setTimeout(ActualizarBarraEstado,1000);